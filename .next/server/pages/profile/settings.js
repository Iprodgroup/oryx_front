(()=>{var e={};e.id=353,e.ids=[353,888,660],e.modules={5801:e=>{e.exports={label:"styles_label__JfMWS",link:"styles_link__3o47r"}},8233:e=>{e.exports={nav:"styles_nav__uws43",container:"styles_container__kz_bG"}},3971:e=>{e.exports={btn:"styles_btn__rWvrV",modal:"styles_modal__czbsg",close__btn:"styles_close__btn__zNrZk",full:"styles_full___rDoS",btns:"styles_btns__gNDjs"}},647:e=>{e.exports={title:"ProfileSettings_title__BmMlv",description:"ProfileSettings_description__OGlMr",wrapper:"ProfileSettings_wrapper__gSpP5",card:"ProfileSettings_card__v8dGt",head:"ProfileSettings_head__vsc5Z",btns:"ProfileSettings_btns__k8Ed1",flx:"ProfileSettings_flx__0HF96"}},2165:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{config:()=>h,default:()=>u,getServerSideProps:()=>x,getStaticPaths:()=>m,getStaticProps:()=>p,reportWebVitals:()=>j,routeModule:()=>b,unstable_getServerProps:()=>y,unstable_getServerSideProps:()=>v,unstable_getStaticParams:()=>f,unstable_getStaticPaths:()=>g,unstable_getStaticProps:()=>_});var a=s(7093),i=s(5244),n=s(1323),l=s(1070),c=s(3893),d=s(7988),o=e([c,d]);[c,d]=o.then?(await o)():o;let u=(0,n.l)(d,"default"),p=(0,n.l)(d,"getStaticProps"),m=(0,n.l)(d,"getStaticPaths"),x=(0,n.l)(d,"getServerSideProps"),h=(0,n.l)(d,"config"),j=(0,n.l)(d,"reportWebVitals"),_=(0,n.l)(d,"unstable_getStaticProps"),g=(0,n.l)(d,"unstable_getStaticPaths"),f=(0,n.l)(d,"unstable_getStaticParams"),y=(0,n.l)(d,"unstable_getServerProps"),v=(0,n.l)(d,"unstable_getServerSideProps"),b=new a.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/profile/settings",pathname:"/profile/settings",bundlePath:"",filename:""},components:{App:c.default,Document:l.default},userland:d});r()}catch(e){r(e)}})},9804:(e,t,s)=>{"use strict";s.d(t,{Z:()=>d});var r=s(997),a=s(6689),i=s(5801),n=s.n(i),l=s(1664),c=s.n(l);let d=({user:e,isParcels:t=!1})=>{let[s,i]=(0,a.useState)(e.delivery_method||"pickup");return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("label",{htmlFor:"delivery_method",className:n().label,children:["Метод доставки",(0,r.jsxs)("select",{name:"delivery_method",id:"delivery_method",defaultValue:s,onChange:e=>i(e.target.value),children:[r.jsx("option",{value:"pickup",children:"Самовывоз со склада (Алматы)"}),r.jsx("option",{value:"address",children:"До адреса (службой СДЭК)"}),r.jsx("option",{value:"pvz",children:"Пункт выдачи СДЭК"})]})]}),("address"===s||"pvz"===s)&&r.jsx("input",{type:"text",name:"delivery_address",placeholder:"Адрес",defaultValue:e.delivery_address,required:!0,className:n().input}),t&&r.jsx(c(),{href:"/profile/settings",className:n().link,children:"Изменить адрес по умолчанию"})]})}},9400:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.d(t,{Z:()=>m});var a=s(997),i=s(6689),n=s(8233),l=s.n(n),c=s(1163),d=s(118),o=s(1664),u=s.n(o),p=e([d]);d=(p.then?(await p)():p)[0];let m=({children:e})=>{let t=(0,d.useIsClient)(),s=(0,c.useRouter)(),r=(0,d.useMediaQuery)("(min-width: 576px)");return(0,i.useEffect)(()=>{let e=document.body;return e.style.backgroundColor="#F4F5FE",()=>{e.removeAttribute("style")}},[]),t&&(0,a.jsxs)(a.Fragment,{children:[r||"/profile"===s.pathname?a.jsx("nav",{className:l().nav,children:(0,a.jsxs)("ul",{children:[a.jsx("li",{children:a.jsx(u(),{href:"/profile/addresses",children:"Мои адреса"})}),a.jsx("li",{children:a.jsx(u(),{href:"/profile/parcels",children:"Мои посылки"})}),a.jsx("li",{children:a.jsx(u(),{href:"/profile/settings",children:"Личные данные"})}),a.jsx("li",{children:a.jsx(u(),{href:"/profile/nsettings",children:"Настройка уведомлений"})})]})}):a.jsx(a.Fragment,{}),a.jsx("section",{children:a.jsx("div",{className:l().container,children:e})})]})};r()}catch(e){r(e)}})},1640:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(997);let a=()=>(0,r.jsxs)("svg",{width:"23",height:"23",viewBox:"0 0 23 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("circle",{cx:"11.3639",cy:"11.7765",r:"9.98698",stroke:"#22AD28",strokeWidth:"2"}),r.jsx("path",{d:"M7.75586 12.3501L11.3841 14.6416L14.8215 8.9126",stroke:"#22AD28",strokeWidth:"2"})]})},8040:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.d(t,{Z:()=>x});var a=s(997),i=s(6689),n=s(3971),l=s.n(n),c=s(3069),d=s(1163),o=s(8848),u=s(6201),p=s(9648),m=e([o,u,p]);[o,u,p]=m.then?(await m)():m;let x=()=>{let[e,t]=(0,i.useState)(!1),[s,r]=(0,i.useState)(null),[n,m]=(0,i.useState)(null),x=(0,d.useRouter)(),h=()=>t(!1),j=(e,t)=>{let s=e.target.files?.[0];if(s){let e=new FileReader;e.onload=()=>{let s=e.result;t(s)},e.readAsDataURL(s)}},_=async e=>{e.preventDefault();let t=u.default.loading("Загрузка...");try{let t=new FormData(e.currentTarget),r=Object.fromEntries(t);await p.default.post("/api/profile/add-recipient",{...r,file1:s,file2:n}),u.default.success("Получатель добавлен"),h(),x.replace(x.asPath)}catch(e){u.default.error("Ошибка при добавлении получателя")}finally{u.default.dismiss(t)}};return(0,a.jsxs)(a.Fragment,{children:[a.jsx("button",{className:l().btn,onClick:()=>t(!0),children:"Добавить получателя"}),(0,a.jsxs)(c.Modal,{open:e,onClose:h,center:!0,classNames:{modal:l().modal,closeButton:l().close__btn},children:[a.jsx("h2",{children:"Добавить получателя"}),a.jsx("p",{children:"Для того чтобы добавить получателя, обязательно заполните все поля помеченные *"}),(0,a.jsxs)("form",{onSubmit:_,children:[a.jsx("input",{type:"text",name:"name",placeholder:"Имя*",required:!0}),a.jsx("input",{type:"text",name:"surname",placeholder:"Фамилия*",required:!0}),a.jsx("input",{type:"text",name:"fname",placeholder:"Отчество"}),(0,a.jsxs)("select",{name:"country",defaultValue:"kz",children:[a.jsx("option",{value:"Казахстан",children:"Казахстан"}),a.jsx("option",{value:"Россия",children:"Россия"})]}),a.jsx("input",{type:"number",name:"pnum",placeholder:"Номер удостоверения личности*",required:!0}),a.jsx("input",{type:"text",name:"pby",placeholder:"Кем выдано*",required:!0}),a.jsx("input",{type:"text",name:"pdate",placeholder:"Дата выдачи*",required:!0,className:l().full}),a.jsx("p",{className:l().full,children:"Прикрепите скан или фото обеих сторон удостоверения личности отдельными файлами в формате jpg, png"}),(0,a.jsxs)("label",{htmlFor:"a",children:["Прикрепить сторону А*",a.jsx("input",{type:"file",name:"file1",id:"a",onChange:e=>j(e,r)})]}),(0,a.jsxs)("label",{htmlFor:"b",children:["Прикрепить сторону Б*",a.jsx("input",{type:"file",name:"file2",id:"b",onChange:e=>j(e,m)})]}),a.jsx(o.InputMask,{mask:"+7 (___) ___-__-__",replacement:{_:/\d/},name:"phone",placeholder:"+7 (___) ___-__-__",required:!0}),a.jsx("input",{type:"text",name:"city",placeholder:"Город*",required:!0}),a.jsx("input",{type:"text",name:"address",placeholder:"Адрес*",required:!0,className:l().full}),(0,a.jsxs)("div",{className:l().btns,children:[a.jsx("button",{type:"submit",children:"Сохранить"}),a.jsx("button",{type:"reset",children:"Отмена"})]})]})]})]})};r()}catch(e){r(e)}})},1070:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(997),a=s(6859);function i(){return(0,r.jsxs)(a.Html,{lang:"ru",children:[(0,r.jsxs)(a.Head,{children:[r.jsx("meta",{name:"description",content:"oryx"}),r.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),r.jsx("meta",{name:"google-site-verification",content:"vp6g7rjn5equhL-Lf8Drs_xJAPsSb3ddlCuWnTSnLTg"}),r.jsx("meta",{name:"yandex-verification",content:"cf6f970418b0ab07"}),r.jsx("link",{rel:"icon",href:"/favicon.ico"}),r.jsx("script",{async:!0,src:"https://www.googletagmanager.com/gtag/js?id=G-V467M4TDHR"}),r.jsx("script",{dangerouslySetInnerHTML:{__html:`
              window.dataLayer = window.dataLayer || [];
              function gtag(){dataLayer.push(arguments);}
              gtag('js', new Date());
              gtag('config', 'G-V467M4TDHR');
            `}}),r.jsx("script",{dangerouslySetInnerHTML:{__html:`
              (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
              m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0];
              k.async=1;k.src=r;a.parentNode.insertBefore(k,a)})
              (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

              ym(98298866, "init", {
                clickmap:true,
                trackLinks:true,
                accurateTrackBounce:true,
                webvisor:true,
                ecommerce:"dataLayer"
              });
            `}})]}),(0,r.jsxs)("body",{children:[r.jsx("noscript",{children:r.jsx("iframe",{src:"https://www.googletagmanager.com/ns.html?id=GTM-PZJV3C4K",height:"0",width:"0",style:{display:"none",visibility:"hidden"}})}),r.jsx("script",{dangerouslySetInnerHTML:{__html:`
              (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
              new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
              j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
              'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
              })(window,document,'script','dataLayer','GTM-PZJV3C4K');
            `}}),r.jsx(a.Main,{}),r.jsx(a.NextScript,{})]})]})}},7988:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{default:()=>v,getServerSideProps:()=>y});var a=s(997),i=s(647),n=s.n(i),l=s(8848),c=s(9648),d=s(6201),o=s(349),u=s(9400),p=s(1640),m=s(8040),x=s(9804),h=s(5811),j=s(6863),_=s(968),g=s.n(_),f=e([l,c,d,u,m,h]);[l,c,d,u,m,h]=f.then?(await f)():f;let y=async e=>{let t=await h.Z.get("/user",{...(0,j.Z)(e)}),s=await h.Z.get("/profile/settings",{...(0,j.Z)(e)}),r=t.data,a=s.data.recipients;return{props:{user:r,recipients:a}}},v=({user:e,recipients:t})=>{let s=async e=>{e.preventDefault();let t=d.default.loading("Загрузка...");try{let t=new FormData(e.currentTarget),{surname:s,name:r,fname:a,email:i,phone:n,password:l,delivery_method:u,delivery_address:p}=Object.fromEntries(t);await c.default.post("/api/profile/settings",{surname:s,name:r,fname:a,email:i,phone:(0,o.A)(n.toString()),password:l,delivery_method:u,delivery_address:"pickup"===u?null:p}),d.default.success("Данные обновлены")}catch(e){d.default.error("Ошибка при обновлении данных")}finally{d.default.dismiss(t)}};return(0,a.jsxs)(u.Z,{children:[a.jsx(g(),{children:a.jsx("title",{children:"Мои личные данные"})}),a.jsx("h1",{className:n().title,children:"Личные данные пользователя"}),a.jsx("p",{className:n().description,children:"В данном разделе собрана вся ваша персональная информация"}),(0,a.jsxs)("div",{className:n().wrapper,children:[(0,a.jsxs)("div",{className:n().card,children:[(0,a.jsxs)("div",{className:n().head,children:[a.jsx("b",{children:"Мои данные"}),(0,a.jsxs)("span",{children:["ID: #",e.id]})]}),(0,a.jsxs)("form",{onSubmit:s,children:[a.jsx("input",{type:"text",name:"surname",placeholder:"Фамилия*",defaultValue:e.surname,required:!0}),a.jsx("input",{type:"text",name:"name",placeholder:"Имя*",defaultValue:e.name,required:!0}),a.jsx("input",{type:"text",name:"fname",placeholder:"Отчество",defaultValue:e.fname}),a.jsx("input",{type:"email",name:"email",placeholder:"Почта",defaultValue:e.email}),a.jsx(l.InputMask,{mask:"+7 (___) ___-__-__",replacement:{_:/\d/},name:"phone",placeholder:"Номер телефона",defaultValue:(0,o.u)(e.phone)}),a.jsx("input",{type:"password",name:"password",placeholder:"Пароль"}),a.jsx(x.Z,{user:e}),(0,a.jsxs)("div",{className:n().btns,children:[a.jsx("button",{type:"submit",children:"Сохранить изменения"}),a.jsx("button",{type:"reset",children:"Отменить изменения"})]})]})]}),(0,a.jsxs)("div",{className:n().card,children:[a.jsx("b",{children:"Получатели"}),a.jsx("p",{children:"Добавить получателя"}),a.jsx("ul",{children:t.map(e=>(0,a.jsxs)("li",{children:[(0,a.jsxs)("div",{className:n().flx,children:[a.jsx(p.Z,{}),a.jsx("span",{children:"Подтвержден"})]}),(0,a.jsxs)("p",{children:[e.surname," ",e.name," ",e.fname]})]},e.id))}),a.jsx(m.Z,{})]})]})]})};r()}catch(e){r(e)}})},6863:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=e=>({headers:{Authorization:`Bearer ${e.req.cookies.access_token}`}})},349:(e,t,s)=>{"use strict";s.d(t,{A:()=>a,u:()=>r});let r=e=>{let t=(""+e).replace(/\D/g,"");return 11===t.length&&"7"===t[0]?t.replace(/(\d)(\d{3})(\d{3})(\d{2})(\d{2})/,"+$1 ($2) $3-$4-$5"):e},a=e=>e.replace(/\D/g,"")},8982:e=>{"use strict";e.exports=require("cookies-next")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{"use strict";e.exports=require("next/head")},6238:e=>{"use strict";e.exports=require("nextjs-toploader")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},4108:e=>{"use strict";e.exports=require("react-modern-drawer")},3069:e=>{"use strict";e.exports=require("react-responsive-modal")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},8848:e=>{"use strict";e.exports=import("@react-input/mask")},9648:e=>{"use strict";e.exports=import("axios")},9915:e=>{"use strict";e.exports=import("js-cookie")},6201:e=>{"use strict";e.exports=import("react-hot-toast")},5941:e=>{"use strict";e.exports=import("swr")},118:e=>{"use strict";e.exports=import("usehooks-ts")},7147:e=>{"use strict";e.exports=require("fs")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},9796:e=>{"use strict";e.exports=require("zlib")}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[117,235,859,342,893],()=>s(2165));module.exports=r})();