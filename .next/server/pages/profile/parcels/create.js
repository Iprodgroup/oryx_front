(()=>{var e={};e.id=378,e.ids=[378,888,660],e.modules={5801:e=>{e.exports={label:"styles_label__JfMWS",link:"styles_link__3o47r"}},8233:e=>{e.exports={nav:"styles_nav__uws43",container:"styles_container__kz_bG"}},7385:e=>{e.exports={wrapper:"CreateParcel_wrapper__xJBC2",left:"CreateParcel_left__xxrcD",card:"CreateParcel_card__N2E9S",head:"CreateParcel_head__uoVh2",flex:"CreateParcel_flex__gIbb5",product__btn:"CreateParcel_product__btn__veaw0",recipient:"CreateParcel_recipient__0yFyz",btns:"CreateParcel_btns__vUv8h",right:"CreateParcel_right__vs4kx"}},9053:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{config:()=>x,default:()=>u,getServerSideProps:()=>m,getStaticPaths:()=>h,getStaticProps:()=>p,reportWebVitals:()=>j,routeModule:()=>b,unstable_getServerProps:()=>y,unstable_getServerSideProps:()=>v,unstable_getStaticParams:()=>_,unstable_getStaticPaths:()=>f,unstable_getStaticProps:()=>g});var a=r(7093),i=r(5244),n=r(1323),l=r(1070),c=r(3893),d=r(6162),o=e([c,d]);[c,d]=o.then?(await o)():o;let u=(0,n.l)(d,"default"),p=(0,n.l)(d,"getStaticProps"),h=(0,n.l)(d,"getStaticPaths"),m=(0,n.l)(d,"getServerSideProps"),x=(0,n.l)(d,"config"),j=(0,n.l)(d,"reportWebVitals"),g=(0,n.l)(d,"unstable_getStaticProps"),f=(0,n.l)(d,"unstable_getStaticPaths"),_=(0,n.l)(d,"unstable_getStaticParams"),y=(0,n.l)(d,"unstable_getServerProps"),v=(0,n.l)(d,"unstable_getServerSideProps"),b=new a.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/profile/parcels/create",pathname:"/profile/parcels/create",bundlePath:"",filename:""},components:{App:c.default,Document:l.default},userland:d});s()}catch(e){s(e)}})},9804:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var s=r(997),a=r(6689),i=r(5801),n=r.n(i),l=r(1664),c=r.n(l);let d=({user:e,isParcels:t=!1})=>{let[r,i]=(0,a.useState)(e.delivery_method||"pickup");return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("label",{htmlFor:"delivery_method",className:n().label,children:["Метод доставки",(0,s.jsxs)("select",{name:"delivery_method",id:"delivery_method",defaultValue:r,onChange:e=>i(e.target.value),children:[s.jsx("option",{value:"pickup",children:"Самовывоз со склада (Алматы)"}),s.jsx("option",{value:"address",children:"До адреса (службой СДЭК)"}),s.jsx("option",{value:"pvz",children:"Пункт выдачи СДЭК"})]})]}),("address"===r||"pvz"===r)&&s.jsx("input",{type:"text",name:"delivery_address",placeholder:"Адрес",defaultValue:e.delivery_address,required:!0,className:n().input}),t&&s.jsx(c(),{href:"/profile/settings",className:n().link,children:"Изменить адрес по умолчанию"})]})}},9400:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{Z:()=>h});var a=r(997),i=r(6689),n=r(8233),l=r.n(n),c=r(1163),d=r(118),o=r(1664),u=r.n(o),p=e([d]);d=(p.then?(await p)():p)[0];let h=({children:e})=>{let t=(0,d.useIsClient)(),r=(0,c.useRouter)(),s=(0,d.useMediaQuery)("(min-width: 576px)");return(0,i.useEffect)(()=>{let e=document.body;return e.style.backgroundColor="#F4F5FE",()=>{e.removeAttribute("style")}},[]),t&&(0,a.jsxs)(a.Fragment,{children:[s||"/profile"===r.pathname?a.jsx("nav",{className:l().nav,children:(0,a.jsxs)("ul",{children:[a.jsx("li",{children:a.jsx(u(),{href:"/profile/addresses",children:"Мои адреса"})}),a.jsx("li",{children:a.jsx(u(),{href:"/profile/parcels",children:"Мои посылки"})}),a.jsx("li",{children:a.jsx(u(),{href:"/profile/settings",children:"Личные данные"})}),a.jsx("li",{children:a.jsx(u(),{href:"/profile/nsettings",children:"Настройка уведомлений"})})]})}):a.jsx(a.Fragment,{}),a.jsx("section",{children:a.jsx("div",{className:l().container,children:e})})]})};s()}catch(e){s(e)}})},1070:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(997),a=r(6859);function i(){return(0,s.jsxs)(a.Html,{lang:"ru",children:[(0,s.jsxs)(a.Head,{children:[s.jsx("meta",{name:"description",content:"oryx"}),s.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),s.jsx("meta",{name:"google-site-verification",content:"vp6g7rjn5equhL-Lf8Drs_xJAPsSb3ddlCuWnTSnLTg"}),s.jsx("meta",{name:"yandex-verification",content:"cf6f970418b0ab07"}),s.jsx("link",{rel:"icon",href:"/favicon.ico"}),s.jsx("script",{async:!0,src:"https://www.googletagmanager.com/gtag/js?id=G-V467M4TDHR"}),s.jsx("script",{dangerouslySetInnerHTML:{__html:`
              window.dataLayer = window.dataLayer || [];
              function gtag(){dataLayer.push(arguments);}
              gtag('js', new Date());
              gtag('config', 'G-V467M4TDHR');
            `}}),s.jsx("script",{dangerouslySetInnerHTML:{__html:`
              (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
              m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0];
              k.async=1;k.src=r;a.parentNode.insertBefore(k,a)})
              (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

              ym(98298866, "init", {
                clickmap:true,
                trackLinks:true,
                accurateTrackBounce:true,
                webvisor:true,
                ecommerce:"dataLayer"
              });
            `}})]}),(0,s.jsxs)("body",{children:[s.jsx("noscript",{children:s.jsx("iframe",{src:"https://www.googletagmanager.com/ns.html?id=GTM-PZJV3C4K",height:"0",width:"0",style:{display:"none",visibility:"hidden"}})}),s.jsx("script",{dangerouslySetInnerHTML:{__html:`
              (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
              new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
              j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
              'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
              })(window,document,'script','dataLayer','GTM-PZJV3C4K');
            `}}),s.jsx(a.Main,{}),s.jsx(a.NextScript,{})]})]})}},6162:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{default:()=>y,getServerSideProps:()=>_});var a=r(997),i=r(6689),n=r(7385),l=r.n(n),c=r(1163),d=r(1664),o=r.n(d),u=r(6201),p=r(9648),h=r(9400),m=r(5811),x=r(6863),j=r(9100),g=r(9804),f=e([u,p,h,m]);[u,p,h,m]=f.then?(await f)():f;let _=async e=>{let t=await m.Z.get("/profile/settings",{...(0,x.Z)(e)}),r=await m.Z.get("/user",{...(0,x.Z)(e)}),s=t.data.recipients,a=r.data;return{props:{recipients:s,user:a}}},y=({recipients:e,user:t})=>{let[r,s]=(0,i.useState)([{id:1,name:"",currency:"USD",price:0}]),n=(0,c.useRouter)(),d=r.reduce((e,t)=>e+t.price,0),m=e=>{s(t=>t.filter(t=>t.id!==e))},x=(e,t,a)=>{let i=r.map(r=>r.id!==t?r:"name"===a?{...r,name:e.target.value}:{...r,price:+e.target.value});s(i)},f=e=>r.find(t=>t.id===e),_=async e=>{e.preventDefault();let t=u.default.loading("Загрузка...");try{let t=new FormData(e.currentTarget),s=Object.fromEntries(t),a={name:[],currency:[],price:[]};r.forEach(e=>{a.name.push(e.name),a.currency.push(e.currency),a.price.push(e.price)}),await p.default.post("/api/profile/add-parcel",{...s,goods:a}),u.default.success("Посылка добавлена"),n.push("/profile/parcels")}catch(e){u.default.error("Ошибка при добавлении посылки")}finally{u.default.dismiss(t)}};return a.jsx(h.Z,{children:(0,a.jsxs)("div",{className:l().wrapper,children:[(0,a.jsxs)("div",{className:l().left,children:[a.jsx("h1",{children:"Добавление посылки"}),(0,a.jsxs)("form",{className:l().card,onSubmit:_,children:[(0,a.jsxs)("div",{className:l().head,children:[(0,a.jsxs)("label",{htmlFor:"departure",children:["Город отправки",(0,a.jsxs)("select",{name:"city_out",id:"departure",defaultValue:"2",children:[a.jsx("option",{value:"1",children:"Нью-Йорк (США)"}),a.jsx("option",{value:"2",children:"Делавэр (США)"})]})]}),(0,a.jsxs)("label",{htmlFor:"delivery",children:["Город доставки",a.jsx("select",{name:"city",id:"delivery",defaultValue:"Алматы",children:j.Z.map((e,t)=>a.jsx("option",{value:e,children:e},t))})]}),a.jsx(g.Z,{user:t,isParcels:!0}),(0,a.jsxs)("div",{className:l().flex,children:[(0,a.jsxs)("label",{htmlFor:"track",children:["Номер трекинга",a.jsx("input",{type:"text",name:"track",id:"track",required:!0})]}),a.jsx("p",{children:"Трекинг-номер – это номер, по которому отслеживается доставка посылки в курьерской службе. Не путать с номером заказа."})]})]}),a.jsx("ul",{children:r.map(e=>(0,a.jsxs)("li",{children:[(0,a.jsxs)("label",{htmlFor:"declaration",children:["Декларация",a.jsx("input",{type:"text",id:"declaration",placeholder:"Наименование",value:f(e.id)?.name,onChange:t=>x(t,e.id,"name"),required:!0})]}),(0,a.jsxs)("select",{defaultValue:"USD",children:[a.jsx("option",{value:"USD",children:"$"}),a.jsx("option",{value:"EUR",children:"€"})]}),(0,a.jsxs)("label",{htmlFor:"price",children:["Стоимость",a.jsx("input",{type:"number",id:"price",placeholder:"Введите сумму",value:f(e.id)?.price||"",onChange:t=>x(t,e.id,"price"),required:!0})]}),1!==e.id&&a.jsx("button",{type:"button",onClick:()=>m(e.id),children:"✕"})]},e.id))}),(0,a.jsxs)("strong",{children:["Итого: ",d,"$"]}),a.jsx("button",{type:"button",onClick:()=>{s(e=>[...e,{id:e.length+1,name:"",currency:"USD",price:0}])},className:l().product__btn,children:"+ Добавить еще один товар"}),(0,a.jsxs)("div",{className:l().recipient,children:["Получатель"," ",a.jsx("select",{name:"recipient_id",required:!0,children:e.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.surname," ",e.name," ",e.fname]},e.id))})]}),(0,a.jsxs)("div",{className:l().btns,children:[a.jsx("button",{type:"submit",children:"Сохранить"}),a.jsx("button",{type:"reset",children:"Отменить"})]})]})]}),(0,a.jsxs)("div",{className:l().right,children:[a.jsx("p",{children:"ВНИМАНИЕ! *Во избежание проблем при таможенной очистке, просим вводить детальное описание наименования товара на русском"}),a.jsx(o(),{href:"/prohibited",children:"Смотреть список запрещенных товаров"})]})]})})};s()}catch(e){s(e)}})},9100:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=["Астана","Алматы","Актау","Актобе","Атырау","Караганда","Кокшетау","Костанай","Кызылорда","Павлодар","Петропавловск","Семей","Талдыкорган","Тараз","Туркестан","Уральск","Усть-Каменогорск."]},6863:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=e=>({headers:{Authorization:`Bearer ${e.req.cookies.access_token}`}})},8982:e=>{"use strict";e.exports=require("cookies-next")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6238:e=>{"use strict";e.exports=require("nextjs-toploader")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},4108:e=>{"use strict";e.exports=require("react-modern-drawer")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},8848:e=>{"use strict";e.exports=import("@react-input/mask")},9648:e=>{"use strict";e.exports=import("axios")},9915:e=>{"use strict";e.exports=import("js-cookie")},6201:e=>{"use strict";e.exports=import("react-hot-toast")},5941:e=>{"use strict";e.exports=import("swr")},118:e=>{"use strict";e.exports=import("usehooks-ts")},7147:e=>{"use strict";e.exports=require("fs")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},9796:e=>{"use strict";e.exports=require("zlib")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[117,235,859,342,893],()=>r(9053));module.exports=s})();