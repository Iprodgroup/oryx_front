(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[378],{752:function(e,r,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile/parcels/create",function(){return l(7778)}])},9804:function(e,r,l){"use strict";var i=l(5893),n=l(7294),t=l(8156),s=l.n(t),a=l(1664),c=l.n(a);r.Z=e=>{let{user:r,isParcels:l=!1}=e,[t,a]=(0,n.useState)(r.delivery_method||"pickup");return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("label",{htmlFor:"delivery_method",className:s().label,children:["Метод доставки",(0,i.jsxs)("select",{name:"delivery_method",id:"delivery_method",defaultValue:t,onChange:e=>a(e.target.value),children:[(0,i.jsx)("option",{value:"pickup",children:"Самовывоз со склада (Алматы)"}),(0,i.jsx)("option",{value:"address",children:"До адреса (службой СДЭК)"}),(0,i.jsx)("option",{value:"pvz",children:"Пункт выдачи СДЭК"})]})]}),("address"===t||"pvz"===t)&&(0,i.jsx)("input",{type:"text",name:"delivery_address",placeholder:"Адрес",defaultValue:r.delivery_address,required:!0,className:s().input}),l&&(0,i.jsx)(c(),{href:"/profile/settings",className:s().link,children:"Изменить адрес по умолчанию"})]})}},9400:function(e,r,l){"use strict";var i=l(5893),n=l(7294),t=l(9573),s=l.n(t),a=l(1163),c=l(9460),d=l(1664),u=l.n(d);r.Z=e=>{let{children:r}=e,l=(0,c.O_)(),t=(0,a.useRouter)(),d=(0,c.ac)("(min-width: 576px)");return(0,n.useEffect)(()=>{let e=document.body;return e.style.backgroundColor="#F4F5FE",()=>{e.removeAttribute("style")}},[]),l&&(0,i.jsxs)(i.Fragment,{children:[d||"/profile"===t.pathname?(0,i.jsx)("nav",{className:s().nav,children:(0,i.jsxs)("ul",{children:[(0,i.jsx)("li",{children:(0,i.jsx)(u(),{href:"/profile/addresses",children:"Мои адреса"})}),(0,i.jsx)("li",{children:(0,i.jsx)(u(),{href:"/profile/parcels",children:"Мои посылки"})}),(0,i.jsx)("li",{children:(0,i.jsx)(u(),{href:"/profile/settings",children:"Личные данные"})}),(0,i.jsx)("li",{children:(0,i.jsx)(u(),{href:"/profile/nsettings",children:"Настройка уведомлений"})})]})}):(0,i.jsx)(i.Fragment,{}),(0,i.jsx)("section",{children:(0,i.jsx)("div",{className:s().container,children:r})})]})}},7778:function(e,r,l){"use strict";l.r(r),l.d(r,{__N_SSP:function(){return _},default:function(){return j}});var i=l(5893),n=l(7294),t=l(2054),s=l.n(t),a=l(1163),c=l(1664),d=l.n(c),u=l(6501),o=l(5121),h=l(9400),p=["Астана","Алматы","Актау","Актобе","Атырау","Караганда","Кокшетау","Костанай","Кызылорда","Павлодар","Петропавловск","Семей","Талдыкорган","Тараз","Туркестан","Уральск","Усть-Каменогорск."],x=l(9804),_=!0,j=e=>{let{recipients:r,user:l}=e,[t,c]=(0,n.useState)([{id:1,name:"",currency:"USD",price:0}]),_=(0,a.useRouter)(),j=t.reduce((e,r)=>e+r.price,0),m=e=>{c(r=>r.filter(r=>r.id!==e))},f=(e,r,l)=>{c(t.map(i=>i.id!==r?i:"name"===l?{...i,name:e.target.value}:{...i,price:+e.target.value}))},v=e=>t.find(r=>r.id===e),y=async e=>{e.preventDefault();let r=u.ZP.loading("Загрузка...");try{let r=new FormData(e.currentTarget),l=Object.fromEntries(r),i={name:[],currency:[],price:[]};t.forEach(e=>{i.name.push(e.name),i.currency.push(e.currency),i.price.push(e.price)}),await o.Z.post("/api/profile/add-parcel",{...l,goods:i}),u.ZP.success("Посылка добавлена"),_.push("/profile/parcels")}catch(e){u.ZP.error("Ошибка при добавлении посылки")}finally{u.ZP.dismiss(r)}};return(0,i.jsx)(h.Z,{children:(0,i.jsxs)("div",{className:s().wrapper,children:[(0,i.jsxs)("div",{className:s().left,children:[(0,i.jsx)("h1",{children:"Добавление посылки"}),(0,i.jsxs)("form",{className:s().card,onSubmit:y,children:[(0,i.jsxs)("div",{className:s().head,children:[(0,i.jsxs)("label",{htmlFor:"departure",children:["Город отправки",(0,i.jsxs)("select",{name:"city_out",id:"departure",defaultValue:"2",children:[(0,i.jsx)("option",{value:"1",children:"Нью-Йорк (США)"}),(0,i.jsx)("option",{value:"2",children:"Делавэр (США)"})]})]}),(0,i.jsxs)("label",{htmlFor:"delivery",children:["Город доставки",(0,i.jsx)("select",{name:"city",id:"delivery",defaultValue:"Алматы",children:p.map((e,r)=>(0,i.jsx)("option",{value:e,children:e},r))})]}),(0,i.jsx)(x.Z,{user:l,isParcels:!0}),(0,i.jsxs)("div",{className:s().flex,children:[(0,i.jsxs)("label",{htmlFor:"track",children:["Номер трекинга",(0,i.jsx)("input",{type:"text",name:"track",id:"track",required:!0})]}),(0,i.jsx)("p",{children:"Трекинг-номер – это номер, по которому отслеживается доставка посылки в курьерской службе. Не путать с номером заказа."})]})]}),(0,i.jsx)("ul",{children:t.map(e=>{var r,l;return(0,i.jsxs)("li",{children:[(0,i.jsxs)("label",{htmlFor:"declaration",children:["Декларация",(0,i.jsx)("input",{type:"text",id:"declaration",placeholder:"Наименование",value:null===(r=v(e.id))||void 0===r?void 0:r.name,onChange:r=>f(r,e.id,"name"),required:!0})]}),(0,i.jsxs)("select",{defaultValue:"USD",children:[(0,i.jsx)("option",{value:"USD",children:"$"}),(0,i.jsx)("option",{value:"EUR",children:"€"})]}),(0,i.jsxs)("label",{htmlFor:"price",children:["Стоимость",(0,i.jsx)("input",{type:"number",id:"price",placeholder:"Введите сумму",value:(null===(l=v(e.id))||void 0===l?void 0:l.price)||"",onChange:r=>f(r,e.id,"price"),required:!0})]}),1!==e.id&&(0,i.jsx)("button",{type:"button",onClick:()=>m(e.id),children:"✕"})]},e.id)})}),(0,i.jsxs)("strong",{children:["Итого: ",j,"$"]}),(0,i.jsx)("button",{type:"button",onClick:()=>{c(e=>[...e,{id:e.length+1,name:"",currency:"USD",price:0}])},className:s().product__btn,children:"+ Добавить еще один товар"}),(0,i.jsxs)("div",{className:s().recipient,children:["Получатель"," ",(0,i.jsx)("select",{name:"recipient_id",required:!0,children:r.map(e=>(0,i.jsxs)("option",{value:e.id,children:[e.surname," ",e.name," ",e.fname]},e.id))})]}),(0,i.jsxs)("div",{className:s().btns,children:[(0,i.jsx)("button",{type:"submit",children:"Сохранить"}),(0,i.jsx)("button",{type:"reset",children:"Отменить"})]})]})]}),(0,i.jsxs)("div",{className:s().right,children:[(0,i.jsx)("p",{children:"ВНИМАНИЕ! *Во избежание проблем при таможенной очистке, просим вводить детальное описание наименования товара на русском"}),(0,i.jsx)(d(),{href:"/prohibited",children:"Смотреть список запрещенных товаров"})]})]})})}},8156:function(e){e.exports={label:"styles_label__JfMWS",link:"styles_link__3o47r"}},9573:function(e){e.exports={nav:"styles_nav__uws43",container:"styles_container__kz_bG"}},2054:function(e){e.exports={wrapper:"CreateParcel_wrapper__xJBC2",left:"CreateParcel_left__xxrcD",card:"CreateParcel_card__N2E9S",head:"CreateParcel_head__uoVh2",flex:"CreateParcel_flex__gIbb5",product__btn:"CreateParcel_product__btn__veaw0",recipient:"CreateParcel_recipient__0yFyz",btns:"CreateParcel_btns__vUv8h",right:"CreateParcel_right__vs4kx"}},1163:function(e,r,l){e.exports=l(9090)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=752)}),_N_E=e.O()}]);